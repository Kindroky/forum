<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoL</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <img src="/static/FoL-Logo.png" alt="Forum Name">
            <div class="post-button-container">
                <!-- Conditional Create Post Button -->
                {{ if .Authenticated }}
                    <button onclick="window.location.href='/addpost'" class="post-button">Create Post</button>
                {{ else }}
                    <button onclick="window.location.href='/login'" class="post-button">Log In to Create Post</button>
                {{ end }}
            </div>
        </header>
        <main class="main-layout">
            <div class="home-icon">
                <a href="/">
                    <img src="/static/FoL-ICON.png" alt="Forum Icon">
                </a>
            </div>

            <!-- Sidebar for Categories -->
            <aside class="sidebar">
                <h3>Categories</h3>
                <div class="category-buttons">
                    <button onclick="window.location.href='/?category=items'">Items</button>
                    <button onclick="window.location.href='/?category=champs'">Champs</button>
                    <button onclick="window.location.href='/?category=meta'">Meta</button>
                    <button onclick="window.location.href='/?category=events'">Events</button>
                </div>
            </aside>
            
            <!-- Feed Content -->
            <section class="feed">
                <div class="welcome-message">
                    Welcome to the land of totally unbiased takes. Become a legend and share your 200 IQ meta predictions and champion sob stories! Theory craft some questionable builds or dissect events like you're a pro analyst! The community is ready to agree, or flame you once again...
                </div>

                <!-- Render posts below the welcome message -->
                {{ if .Posts }}
                    {{ range .Posts }}
                        <div class="post">
                            <!-- Post Header -->
                            <div class="post-header">
                                <h2>{{ .Title }}</h2>
                                <div class="post-user-info">
                                    <p><strong>{{ if .User.Username }}{{ .User.Username }}{{ else }}Unknown User{{ end }}</strong></p>
                                    <p>Rank: {{ if .User.Rank }}{{ .User.Rank }}{{ else }}Unranked{{ end }}</p>
                                </div>
                            </div>

                            <!-- Post Content -->
                            <div class="post-content">
                                <p>{{ .Content }}</p>
                            </div>

                            <!-- Post Footer -->
                            <hr class="post-divider">
                            <div class="post-footer">
                                <!-- Interaction Buttons -->
                                {{ if $.Authenticated }}
                                    <form action="/like" method="POST" class="like-form">
                                        <input type="hidden" name="postID" value="{{ .ID }}">
                                        <input type="hidden" name="likeType" value="1">
                                        <button type="submit" class="like-button">üëç Like</button>
                                    </form>
                                    <form action="/like" method="POST" class="dislike-form">
                                        <input type="hidden" name="postID" value="{{ .ID }}">
                                        <input type="hidden" name="likeType" value="-1">
                                        <button type="submit" class="dislike-button">üëé Dislike</button>
                                    </form>
                                    <button class="comment-button" onclick="window.location.href='/post/{{ .ID }}#comments'">üí¨ Comment</button>
                                {{ else }}
                                    <p>Please <a href="/login">log in</a> to interact with posts.</p>
                                {{ end }}
                            </div>
                        </div>
                    {{ end }}
                {{ else }}
                    <p>No posts available. Be the first to create one!</p>
                {{ end }}
            </section>

            <!-- Profile Sidebar -->
            <aside class="profile-sidebar">
                <!-- User Profile -->
                {{ if .Authenticated }}
                    <div class="profile-box">
                        <h3>{{ if .User.Username }}{{ .User.Username }}{{ else }}Unknown User{{ end }}</h3>
                        <p>Rank: {{ if .User.Rank }}{{ .User.Rank }}{{ else }}Unranked{{ end }}</p>
                        <a href="/logout" class="logout-button">Log Out</a>
                    </div>
                {{ else }}
                    <div class="profile-box">
                        <h3>Welcome, Guest!</h3>
                        <p><a href="/login">Log in</a> or <a href="/register">register</a> to join the community.</p>
                    </div>
                {{ end }}
            </aside>
        </main>
    </div>
</body>
</html>



